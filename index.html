<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Keep browser UI (Android Chrome URL/status bar) aligned with the app theme, even in dark-mode -->
    <meta name="theme-color" content="#ecf0f1">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ecf0f1">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#ecf0f1">
    <meta name="color-scheme" content="light">
    <meta name="supported-color-schemes" content="light">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="MekanApp">
    <title>MekanApp - Kafe YÃ¶netimi</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Generated in dist/ by build.mjs on Cloudflare Pages -->
    <script src="env.js"></script>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="header-content">
                <h1>ğŸº MekanApp <span id="header-view-title" class="header-view-title">- Masalar</span></h1>
                <nav class="main-nav-compact">
                    <button class="menu-toggle" id="menu-toggle">â˜° MenÃ¼</button>
                    <div class="menu-dropdown" id="menu-dropdown">
                        <button class="nav-btn-compact active" data-view="tables">Masalar</button>
                        <button class="nav-btn-compact" data-view="products">ÃœrÃ¼nler</button>
                        <button class="nav-btn-compact" data-view="customers">MÃ¼ÅŸteriler</button>
                        <button class="nav-btn-compact" data-view="expenses">Giderler</button>
                        <button class="nav-btn-compact" data-view="sales">SatÄ±ÅŸ GeÃ§miÅŸi</button>
                        <button class="nav-btn-compact" data-view="daily">Rapor</button>
                    </div>
                </nav>
                <button id="pwa-install-btn" class="btn btn-secondary install-btn" style="display: none;">ğŸ“² Ana Ekrana Ekle</button>
            </div>
        </header>

        <main>
            <!-- Tables View -->
            <section id="tables-view" class="view active">
                <div id="tables-container" class="tables-grid"></div>
            </section>

            <!-- Products View -->
            <section id="products-view" class="view">
                <div id="products-container" class="products-grid"></div>
            </section>

            <!-- Customers View -->
            <section id="customers-view" class="view">
                <div id="customers-container" class="customers-grid"></div>
            </section>

            <!-- Expenses View -->
            <section id="expenses-view" class="view">
                <div id="expenses-container" class="expenses-list"></div>
            </section>

            <!-- Sales History View -->
            <section id="sales-view" class="view">
                <div class="view-header">
                    <h2>SatÄ±ÅŸ GeÃ§miÅŸi</h2>
                    <div class="filter-controls">
                        <select id="sales-table-filter">
                            <option value="">TÃ¼m Masalar</option>
                        </select>
                        <select id="sales-status-filter">
                            <option value="">TÃ¼m Durumlar</option>
                            <option value="paid">Ã–dendi</option>
                            <option value="unpaid">Ã–denmedi</option>
                        </select>
                    </div>
                </div>
                <div id="sales-container" class="sales-list"></div>
            </section>

            <!-- Daily Dashboard View -->
            <section id="daily-view" class="view">
                <div class="view-header">
                    <h2>Rapor ve Analiz</h2>
                    <div class="report-controls">
                        <div class="report-date-controls">
                            <label class="report-date-label">
                                <strong>BaÅŸlangÄ±Ã§ Tarihi:</strong>
                                <input type="date" id="report-start-date" class="report-date-input">
                            </label>
                            <label class="report-date-label">
                                <strong>BitiÅŸ Tarihi:</strong>
                                <input type="date" id="report-end-date" class="report-date-input">
                            </label>
                            <button class="btn btn-primary report-btn" id="report-apply-btn">Uygula</button>
                            <button class="btn btn-secondary report-btn" id="report-today-btn">BugÃ¼n</button>
                        </div>
                    </div>
                </div>
                <div id="daily-container">
                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ’°</div>
                            <div class="stat-content">
                                <h3>GÃ¼nlÃ¼k Gelir</h3>
                                <p class="stat-value" id="daily-income">0.00 â‚º</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“¦</div>
                            <div class="stat-content">
                                <h3>SatÄ±lan ÃœrÃ¼n</h3>
                                <p class="stat-value" id="products-sold">0</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">â±ï¸</div>
                            <div class="stat-content">
                                <h3>Oynanan</h3>
                                <p class="stat-value" id="table-hours">0 dk</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ’µ</div>
                            <div class="stat-content">
                                <h3>Oyun Geliri</h3>
                                <p class="stat-value" id="hourly-income">0.00 â‚º</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ›’</div>
                            <div class="stat-content">
                                <h3>ÃœrÃ¼n Geliri</h3>
                                <p class="stat-value" id="product-income">0.00 â‚º</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“Š</div>
                            <div class="stat-content">
                                <h3>Ä°ÅŸlemler</h3>
                                <p class="stat-value" id="transactions-count">0</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ’</div>
                            <div class="stat-content">
                                <h3>ÃœrÃ¼n KarÄ±</h3>
                                <p class="stat-value" id="product-profit">0.00 â‚º</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ®</div>
                            <div class="stat-content">
                                <h3>Oyun KarÄ±</h3>
                                <p class="stat-value" id="game-profit">0.00 â‚º</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“ˆ</div>
                            <div class="stat-content">
                                <h3>Toplam Kar</h3>
                                <p class="stat-value" id="total-profit">0.00 â‚º</p>
                            </div>
                        </div>
                        <div class="stat-card" style="background: #fff3cd; border-color: #ffc107;">
                            <div class="stat-icon">ğŸ’³</div>
                            <div class="stat-content">
                                <h3>BugÃ¼n Verilen Veresiye</h3>
                                <p class="stat-value" id="credit-given-today">0.00 â‚º</p>
                            </div>
                        </div>
                        <div class="stat-card" style="background: #f8d7da; border-color: #dc3545;">
                            <div class="stat-icon">ğŸ“‹</div>
                            <div class="stat-content">
                                <h3>Toplam Veresiye</h3>
                                <p class="stat-value" id="total-credit-balance">0.00 â‚º</p>
                            </div>
                        </div>
                        <div class="stat-card" style="background: #fff3cd; border-color: #ffc107;">
                            <div class="stat-icon">ğŸ’¸</div>
                            <div class="stat-content">
                                <h3>Toplam Gider</h3>
                                <p class="stat-value" id="total-expenses">0.00 â‚º</p>
                            </div>
                        </div>
                        <div class="stat-card" style="background: #d1ecf1; border-color: #0c5460;">
                            <div class="stat-icon">ğŸ“Š</div>
                            <div class="stat-content">
                                <h3>Net Kar</h3>
                                <p class="stat-value" id="net-profit">0.00 â‚º</p>
                            </div>
                        </div>
                        <div class="stat-card" style="background: #d4edda; border-color: #28a745;">
                            <div class="stat-icon">ğŸ“ˆ</div>
                            <div class="stat-content">
                                <h3>AylÄ±k Gelir</h3>
                                <p class="stat-value" id="monthly-income">0.00 â‚º</p>
                            </div>
                        </div>
                        <div class="stat-card" style="background: #f8d7da; border-color: #dc3545;">
                            <div class="stat-icon">ğŸ“‰</div>
                            <div class="stat-content">
                                <h3>AylÄ±k Gider</h3>
                                <p class="stat-value" id="monthly-expenses">0.00 â‚º</p>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-grid">
                        <div class="chart-card">
                            <h3>TÃ¼re GÃ¶re Gelir</h3>
                            <div id="income-chart-container" style="position: relative; height: 300px;">
                                <canvas id="income-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>SatÄ±lan ÃœrÃ¼nler</h3>
                            <div id="products-chart-container" style="position: relative; height: 300px;">
                                <canvas id="products-chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Table Usage Details -->
                    <div class="table-usage-section">
                        <h3>Masa KullanÄ±m DetaylarÄ±</h3>
                        <div id="table-usage-list"></div>
                    </div>

                    <!-- Manual Sessions -->
                    <div class="table-usage-section">
                        <h3>Manuel Oyun KayÄ±tlarÄ±</h3>
                        <div id="manual-sessions-list"></div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer removed -->
    </div>

    <!-- Table Detail Modal -->
    <div id="table-modal" class="modal">
        <div class="modal-content">
            <div class="table-modal-header">
                <div class="table-modal-titlebar">
                    <h2 id="table-modal-title">Masa</h2>
                    <!-- Instant sale only: quantity control next to the title -->
                    <div id="instant-qty-controls" class="instant-qty-controls" style="display:none;">
                        <button type="button" class="btn btn-secondary instant-qty-btn" id="instant-qty-minus" aria-label="Azalt">âˆ’</button>
                        <input id="instant-qty-input" class="instant-qty-input" type="number" min="1" step="1" value="1" inputmode="numeric" />
                        <button type="button" class="btn btn-secondary instant-qty-btn" id="instant-qty-plus" aria-label="ArttÄ±r">+</button>
                    </div>
                </div>
                <button type="button" class="close close-header" aria-label="Geri">
                    <span class="close-ico" aria-hidden="true">â®</span>
                    <span class="close-txt">Geri</span>
                </button>
            </div>
            <div id="table-modal-body">
                <!-- Products Selection Section (shown when table is open or regular table) -->
                <div id="table-products-section" style="display: none;">
                    <div id="table-products-grid" class="products-grid-mini"></div>
                </div>
                <!-- Divider between products and orders -->
                <div class="table-modal-divider"></div>
                <div id="table-sales-list" class="sales-items"></div>
            </div>
            <div class="table-modal-footer">
                <div class="table-info-footer">
                    <div id="hourly-info" style="display: none;" class="table-info-grid">
                        <span><strong>AÃ§Ä±lÄ±ÅŸ:</strong> <span id="modal-open-time"></span></span>
                        <span><strong>Oyun:</strong> <span id="modal-hourly-total"></span></span>
                        <span><strong>ÃœrÃ¼n:</strong> <span id="modal-sales-total"></span></span>
                        <span class="table-info-total"><strong>Toplam:</strong> <span id="modal-check-total"></span></span>
                    </div>
                    <div id="regular-info" class="table-info-grid" style="display: none;">
                        <span class="table-info-total"><strong>Toplam:</strong> <span id="modal-check-total-regular"></span></span>
                    </div>
                </div>
                <div class="table-footer-buttons">
                    <button class="btn btn-success btn-footer" id="pay-table-btn">
                        <span class="btn-ico" aria-hidden="true">â‚º</span>
                        <span class="btn-txt">0 â‚º</span>
                    </button>
                    <button class="btn btn-info btn-footer" id="credit-table-btn" style="display: none;">
                        <span class="btn-ico" aria-hidden="true">ğŸ’³</span>
                        <span class="btn-txt">Veresiye</span>
                    </button>
                    <button class="btn btn-danger btn-footer" id="cancel-hourly-btn" style="display: none;">
                        <span class="btn-ico" aria-hidden="true">âœ–</span>
                        <span class="btn-txt">Ä°ptal</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delayed Start Modal (Hourly Tables) -->
    <div id="delayed-start-modal" class="modal">
        <div class="modal-content delayed-start-modal-content">
            <span class="close">&times;</span>
            <h2>Gecikmeli BaÅŸlat</h2>
            <input type="hidden" id="delayed-start-table-id">
            <label>
                BaÅŸlama Saati (BugÃ¼n):
                <input type="time" id="delayed-start-time" class="delayed-start-time-input" required>
            </label>
            <div class="form-actions">
                <button type="button" class="btn btn-primary" id="delayed-start-confirm-btn">BaÅŸlat</button>
                <button type="button" class="btn btn-secondary" id="delayed-start-cancel-btn">Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- Manual Session input removed (still displaying manual sessions list in reports) -->

    <!-- Add/Edit Product Modal -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="product-modal-title">ÃœrÃ¼n Ekle</h2>
            <form id="product-form">
                <input type="hidden" id="product-id">
                <label>
                    ÃœrÃ¼n AdÄ±:
                    <input type="text" id="product-name" required>
                </label>
                <label>
                    SatÄ±ÅŸ FiyatÄ± (â‚º):
                    <input type="number" id="product-price" step="0.01" min="0" required>
                </label>
                <label>
                    AlÄ±ÅŸ FiyatÄ± (â‚º):
                    <input type="number" id="product-arrival-price" step="0.01" min="0" required>
                </label>
                <label>
                    Kategori:
                    <select id="product-category" required>
                        <option value="alcohol">AlkollÃ¼ Ä°Ã§ecekler</option>
                        <option value="soft" selected>MeÅŸrubatlar</option>
                        <option value="food">Yiyecekler</option>
                    </select>
                </label>
                <label>
                    ÃœrÃ¼n Ä°konu:
                    <select id="product-icon" required>
                        <option value="tuborg">Tuborg (SarÄ± Bira)</option>
                        <option value="carlsberg">Carlsberg (YeÅŸil Bira)</option>
                        <option value="nescafe">Nescafe</option>
                        <option value="cay">TÃ¼rk Ã‡ayÄ± (Siyah Ã‡ay)</option>
                        <option value="cola">Cocaâ€‘Cola</option>
                        <option value="ayran">Ayran</option>
                        <option value="kasar">KaÅŸar Peyniri</option>
                        <option value="sigara">Sigara</option>
                        <option value="â˜•">â˜• Kahve</option>
                        <option value="ğŸµ">ğŸµ Ã‡ay</option>
                        <option value="ğŸ«–">ğŸ«– Demlik</option>
                        <option value="ğŸ¥¤">ğŸ¥¤ Kola / GazlÄ±</option>
                        <option value="ğŸ§ƒ">ğŸ§ƒ Meyve Suyu</option>
                        <option value="ğŸ’§">ğŸ’§ Su</option>
                        <option value="ğŸ§Š">ğŸ§Š Buzlu</option>
                        <option value="ğŸº">ğŸº Bira</option>
                        <option value="ğŸ»">ğŸ» Bira (FÄ±Ã§Ä±)</option>
                        <option value="ğŸ«—">ğŸ«— Bira (DÃ¶kme)</option>
                        <option value="ğŸ¥¨">ğŸ¥¨ Bira AtÄ±ÅŸtÄ±rmalÄ±k</option>
                        <option value="ğŸ·">ğŸ· Åarap</option>
                        <option value="ğŸ¥ƒ">ğŸ¥ƒ Viski</option>
                        <option value="ğŸ¸">ğŸ¸ Kokteyl</option>
                        <option value="ğŸ¹">ğŸ¹ Kokteyl (Tropik)</option>
                        <option value="ğŸ°">ğŸ° TatlÄ±</option>
                        <option value="ğŸ¥">ğŸ¥ Kruvasan</option>
                        <option value="ğŸª">ğŸª Kurabiye</option>
                        <option value="ğŸ«">ğŸ« Ã‡ikolata</option>
                        <option value="ğŸ¥œ">ğŸ¥œ Ã‡erez</option>
                        <option value="ğŸ¥ª">ğŸ¥ª SandviÃ§</option>
                        <option value="ğŸ•">ğŸ• Pizza</option>
                        <option value="ğŸŸ">ğŸŸ Patates</option>
                        <option value="ğŸ“¦">ğŸ“¦ DiÄŸer</option>
                    </select>
                </label>
                <label id="product-stock-label" class="stock-control-label">
                    <div class="stock-checkbox-group">
                        <input type="checkbox" id="product-track-stock" checked>
                        <span>Stok Takibi Yap</span>
                    </div>
                    <div class="stock-input-group">
                        <span>Stok:</span>
                        <input type="number" id="product-stock" min="0" value="0" class="stock-input">
                    </div>
                </label>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                    <button type="button" class="btn btn-secondary" id="cancel-product-btn">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Table Modal -->
    <div id="table-form-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="table-form-modal-title">Masa Ekle</h2>
            <form id="table-form">
                <input type="hidden" id="table-id">
                <label>
                    Masa AdÄ±:
                    <input type="text" id="table-name" required>
                </label>
                <label>
                    Masa Tipi:
                    <select id="table-type" required>
                        <option value="regular">Normal Masa</option>
                        <option value="hourly">Saatlik Ãœcretli Masa</option>
                    </select>
                </label>
                <label id="hourly-rate-label" style="display: none;">
                    Saatlik Ãœcret (â‚º):
                    <input type="number" id="table-hourly-rate" step="0.01" min="0">
                </label>
                <label id="table-icon-label">
                    Masa Ä°konu:
                    <select id="table-icon" required>
                        <option value="ğŸª‘">ğŸª‘ Sandalye</option>
                        <option value="ğŸ’º">ğŸ’º Koltuk</option>
                        <option value="ğŸ›‹ï¸">ğŸ›‹ï¸ Koltuk (YumuÅŸak)</option>
                        <option value="ğŸª‘">ğŸª‘ Sandalye (Klasik)</option>
                        <option value="ğŸª‘">ğŸª‘ Sandalye (YÃ¼ksek)</option>
                        <option value="ğŸª‘">ğŸª‘ Sandalye (Bar)</option>
                        <option value="ğŸ¢">ğŸ¢ Ofis</option>
                        <option value="ğŸµ">ğŸµ Ã‡ay</option>
                        <option value="ğŸª‘">ğŸª‘ Koltuk (Ofis)</option>
                        <option value="ğŸª‘">ğŸª‘ Sandalye (Kafe)</option>
                        <option value="â˜•">â˜• Kahve</option>
                        <option value="ğŸ½ï¸">ğŸ½ï¸ Masa</option>
                        <option value="ğŸº">ğŸº Bira</option>
                        <option value="ğŸ±">ğŸ± Bilardo</option>
                        <option value="ğŸ®">ğŸ® PlayStation</option>
                        <option value="ğŸ¯">ğŸ¯ Dart</option>
                        <option value="ğŸ²">ğŸ² Zar Oyunu</option>
                        <option value="ğŸ“">ğŸ“ Masa Tenisi</option>
                        <option value="ğŸ³">ğŸ³ Bowling</option>
                        <option value="ğŸ¸">ğŸ¸ Gitar</option>
                        <option value="ğŸ¤">ğŸ¤ Mikrofon</option>
                        <option value="ğŸ¹">ğŸ¹ Piyano</option>
                        <option value="ğŸƒ">ğŸƒ Kart Oyunu</option>
                    </select>
                </label>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                    <button type="button" class="btn btn-secondary" id="cancel-table-form-btn">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Product to Table Modal -->
    <div id="add-product-table-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Masaya ÃœrÃ¼n Ekle</h2>
            <form id="add-product-table-form">
                <input type="hidden" id="current-table-id">
                <label>
                    ÃœrÃ¼n:
                    <select id="product-select" required></select>
                </label>
                <label>
                    Miktar:
                    <input type="number" id="product-amount" min="1" value="1" required>
                </label>
                <div id="product-stock-info"></div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Ekle</button>
                    <button type="button" class="btn btn-secondary" id="cancel-add-product-table-btn">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Customer Modal -->
    <div id="customer-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="customer-modal-title">MÃ¼ÅŸteri Ekle</h2>
            <form id="customer-form">
                <input type="hidden" id="customer-id">
                <label>
                    MÃ¼ÅŸteri AdÄ±:
                    <input type="text" id="customer-name" required>
                </label>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                    <button type="button" class="btn btn-secondary" id="cancel-customer-btn">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Customer Payment Modal -->
    <div id="customer-payment-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="customer-payment-title">MÃ¼ÅŸteri Ã–demesi</h2>
            <div id="customer-payment-body">
                <div style="margin-bottom: 20px;">
                    <p><strong>MÃ¼ÅŸteri:</strong> <span id="payment-customer-name"></span></p>
                    <p><strong>Veresiye Bakiyesi:</strong> <span id="payment-customer-balance" style="font-size: 1.2rem; font-weight: bold; color: #e74c3c;"></span></p>
                </div>
                <form id="customer-payment-form">
                    <input type="hidden" id="payment-customer-id">
                    <label>
                        Ã–deme MiktarÄ± (â‚º):
                        <input type="number" id="payment-amount" step="0.01" min="0.01" required>
                    </label>
                    <div class="form-actions">
                        <button type="button" class="btn btn-success" id="pay-full-amount-btn">TAMAMINI AL</button>
                        <button type="submit" class="btn btn-primary">Ã–deme Yap</button>
                        <button type="button" class="btn btn-secondary" id="cancel-customer-payment-btn">Ä°ptal</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Customer Credit Add Modal (manual credit without products) -->
    <div id="customer-credit-add-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="customer-credit-add-title">Veresiye Ekle</h2>
            <div style="margin-bottom: 16px;">
                <p><strong>MÃ¼ÅŸteri:</strong> <span id="credit-add-customer-name"></span></p>
                <p><strong>Mevcut Veresiye:</strong> <span id="credit-add-customer-balance" style="font-size: 1.2rem; font-weight: bold; color: #e67e22;"></span></p>
            </div>
            <form id="customer-credit-add-form">
                <input type="hidden" id="credit-add-customer-id">
                <label>
                    Eklenecek Tutar (â‚º):
                    <input type="number" id="credit-add-amount" step="0.01" min="0.01" required>
                </label>
                <div class="form-actions">
                    <button type="submit" class="btn btn-warning">+ Veresiye Ekle</button>
                    <button type="button" class="btn btn-secondary" id="cancel-customer-credit-add-btn">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Customer Selection Modal for Credit -->
    <div id="customer-selection-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>MÃ¼ÅŸteri SeÃ§in</h2>
            <div id="customer-selection-buttons" class="customer-selection-buttons"></div>
        </div>
    </div>

    <!-- Adisyon (Receipt) Modal -->
    <div id="receipt-modal" class="modal">
        <div class="modal-content receipt-modal-content">
            <div class="receipt-header">
                <h2>ADÄ°SYON</h2>
                <div id="receipt-date-time" class="receipt-date-time"></div>
            </div>
            <div id="receipt-body" class="receipt-body">
                <!-- Receipt content will be inserted here -->
            </div>
            <div class="receipt-actions">
                <button class="btn btn-secondary" id="cancel-receipt-btn">Ä°ptal</button>
                <button class="btn btn-success" id="confirm-payment-btn">Ã–demeyi Tamamla</button>
                <button class="btn btn-info" id="confirm-credit-btn" style="display: none;">Veresiye Ä°ÅŸaretle</button>
            </div>
        </div>
    </div>

    <!-- Expense Form Modal -->
    <div id="expense-form-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="expense-form-modal-title">Gider Ekle</h2>
            <form id="expense-form">
                <input type="hidden" id="expense-id">
                <label>
                    AÃ§Ä±klama:
                    <input type="text" id="expense-description" required>
                </label>
                <label>
                    Tutar (â‚º):
                    <input type="number" id="expense-amount" step="0.01" min="0" required>
                </label>
                <label>
                    Kategori:
                    <select id="expense-category" required>
                        <option value="">SeÃ§iniz</option>
                        <option value="elektrik">âš¡ Elektrik</option>
                        <option value="toptanci">ğŸº ToptancÄ± (Bira)</option>
                        <option value="bilardo">ğŸ± Bilardo Giderleri</option>
                        <option value="playstation">ğŸ® PlayStation Giderleri</option>
                        <option value="tamir">ğŸ”§ Tamir Tadilat</option>
                        <option value="eleman">ğŸ‘¤ Eleman ParasÄ±</option>
                        <option value="kira">ğŸ  Kira</option>
                        <option value="su">ğŸ’§ Su</option>
                        <option value="internet">ğŸŒ Ä°nternet</option>
                        <option value="diger">ğŸ“‹ DiÄŸer</option>
                    </select>
                </label>
                <label>
                    Tarih:
                    <input type="date" id="expense-date" required>
                </label>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-expense-btn">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- App Dialog (replaces browser alert/confirm) -->
    <div id="app-dialog" class="modal app-dialog-modal" aria-hidden="true">
        <div class="modal-content app-dialog-content" role="dialog" aria-modal="true" aria-labelledby="app-dialog-title">
            <div class="app-dialog-header">
                <h2 id="app-dialog-title">UyarÄ±</h2>
                <span class="close app-dialog-close" id="app-dialog-close" aria-label="Kapat">&times;</span>
            </div>
            <div id="app-dialog-message" class="app-dialog-message"></div>
            <div class="form-actions app-dialog-actions">
                <button type="button" class="btn btn-secondary" id="app-dialog-cancel-btn" style="display:none;">Ä°ptal</button>
                <button type="button" class="btn btn-primary" id="app-dialog-confirm-btn">Tamam</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay (blocks UI during critical operations) -->
    <div id="loading-overlay" class="loading-overlay" style="display:none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-message" id="loading-message">Ä°ÅŸleniyor...</div>
        </div>
    </div>

    <!-- Auth Modal (Supabase) -->
    <div id="auth-modal" class="modal active" style="display:none;">
        <div class="modal-content auth-modal-content" role="dialog" aria-modal="true" aria-labelledby="auth-title">
            <div class="auth-header">
                <div class="auth-badge">ğŸ”</div>
                <div class="auth-title-wrap">
                    <h2 id="auth-title">GiriÅŸ Yap</h2>
                    <p class="auth-subtitle">HesabÄ±nÄ±zla giriÅŸ yapÄ±n</p>
                </div>
            </div>

            <form id="auth-form" class="auth-form">
                <label class="auth-label">
                    <span>Email</span>
                    <input type="email" id="auth-email" class="auth-input" placeholder="ornek@mail.com" autocomplete="email" required>
                </label>

                <label class="auth-label">
                    <span>Åifre</span>
                    <div class="auth-password-row">
                        <input type="password" id="auth-password" class="auth-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" required>
                        <button type="button" class="auth-toggle" id="auth-toggle-password">GÃ¶ster</button>
                    </div>
                </label>

                <div id="auth-error" class="auth-error" style="display:none;"></div>

                <button type="submit" class="btn btn-primary auth-submit" id="auth-login-btn">
                    <span id="auth-login-text">GiriÅŸ Yap</span>
                    <span id="auth-login-spinner" class="auth-spinner" style="display:none;"></span>
                </button>
            </form>
        </div>
    </div>

    <!-- IndexedDB local cache (must be loaded before app.js / hybrid-db.js) -->
    <script src="database.js"></script>

    <!-- Supabase + App (module) -->
    <script type="module" src="app.js"></script>
</body>
</html>
